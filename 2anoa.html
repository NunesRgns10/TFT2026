<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chamada Digital - 2º A</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f1f5f9;
            --text: #1e293b;
            --verde: #22c55e;
            --vermelho: #ef4444;
            --azul: #3b82f6;
        }

        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 850px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        
        header { border-bottom: 2px solid #e2e8f0; padding-bottom: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        h1 { margin: 0; color: var(--primary); font-size: 1.4rem; }
        
        .controls { margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: bold; }
        input[type="date"] { padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; outline: none; }

        table { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
        th { text-align: left; padding: 12px; color: #64748b; font-size: 0.9rem; text-transform: uppercase; }
        td { padding: 12px; background: #fff; border-top: 1px solid #f1f5f9; border-bottom: 1px solid #f1f5f9; }
        td:first-child { border-left: 1px solid #f1f5f9; border-radius: 8px 0 0 8px; font-weight: 500; }
        td:last-child { border-right: 1px solid #f1f5f9; border-radius: 0 8px 8px 0; text-align: right; }

        .btn-group { display: inline-flex; gap: 5px; }
        .status-btn { 
            border: 2px solid #e2e8f0; background: white; padding: 8px 15px; 
            border-radius: 6px; cursor: pointer; font-weight: bold; transition: all 0.2s; color: #94a3b8;
        }

        .status-btn.p-active { border-color: var(--verde); background: var(--verde); color: white; }
        .status-btn.f-active { border-color: var(--vermelho); background: var(--vermelho); color: white; }
        .status-btn.fs-active { border-color: var(--azul); background: var(--azul); color: white; }

        .btn-finalizar { 
            margin-top: 30px; padding: 18px; background: var(--primary); color: white; 
            border: none; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; font-size: 1.1rem;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.4);
        }
        .btn-finalizar:hover { background: #1d4ed8; transform: translateY(-1px); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>2º Ano A - Chamada</h1>
        <div class="controls">
            <input type="date" id="dataAula">
        </div>
    </header>

    <table>
        <thead>
            <tr>
                <th>Estudante</th>
                <th style="text-align: right;">P / F / FS</th>
            </tr>
        </thead>
        <tbody id="listaAlunos"></tbody>
    </table>

    <button class="btn-finalizar" onclick="gerarRelatorioPDF()">Finalizar e Gerar PDF</button>
</div>

<script>
    const { jsPDF } = window.jspdf;

    const alunos = [
        "1. Adriano Barbosa de Barrun", "2. Adrnelly du Nascimento Araujo", "3. Amanda de Oliveira Braga Sobnpho",
        "4. Angelu Pinhe", "5. Ana Lyvia Soares Cruz", "6. Antonio Rodrigo da Silva Abreu",
        "7. Antony Lucas Conceicao Nawermento", "8. Davi Parente Mastrillo", "9. Debora Kamila Belfort da Silva",
        "10. Diogo Olimpio Vierra Siquei", "11. Emanuelly da Col Barbesa", "12. Frasco Ezequiel Gomes Ima",
        "13. Francisco Itato Brito de Salva", "14. Guilherme Levi Maciel Monteira", "15. Gluthyerre Brandao Ribeen",
        "16. Icaro Perera da Silva", "17. Igor Oliveira de Almeida", "18. Jose Gabriel Silva Vercоба",
        "19. Jase Guilherme Campos de Lavor", "20. Joac Pedro Paulino Silva", "21. Joao Victor Costa dos Santut",
        "22. Kaua Marques de Silva Nogueira", "23. Kauane Evelly Vieira Nascimento", "24. Lara Julia Oliveira Moreira",
        "25. Leticia Assuntao Sena", "26. Maria Beatriz Sousa Nogмена", "27. Maria Eduarda dos Santos Cardos",
        "28. Mana Eduarda Lessa Nascimento", "29. Maria Leys dos Santos Nepomieno", "30. Maria Ysadora Pires da Gura",
        "31. Matheus de Souza Sampaio", "32. Nicolly Wendy Holanda", "33. Paulo Roberto Pessoa dos Santos",
        "34. Sabrina da Silva", "35. Samyle Victoria Freitas Machado", "36. Thafyllas Chrystian Assunção Soares",
        "37. Yara do Nascimento Moura", "ana livia caetano", "ana beatriz angelo", "joao gabriel silva", "Daniel mota silveira"
    ];

    const presencas = {};
    alunos.forEach((_, i) => presencas[i] = 'P');

    const tbody = document.getElementById('listaAlunos');

    function renderizarTabela() {
        tbody.innerHTML = '';
        alunos.forEach((aluno, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${aluno}</td>
                <td>
                    <div class="btn-group">
                        <button class="status-btn ${presencas[index] === 'P' ? 'p-active' : ''}" onclick="marcar(${index}, 'P')">P</button>
                        <button class="status-btn ${presencas[index] === 'F' ? 'f-active' : ''}" onclick="marcar(${index}, 'F')">F</button>
                        <button class="status-btn ${presencas[index] === 'FS' ? 'fs-active' : ''}" onclick="marcar(${index}, 'FS')">FS</button>
                    </div>
                </td>
            `;
            tbody.appendChild(row);
        });
    }

    function marcar(index, status) {
        presencas[index] = status;
        renderizarTabela();
    }

    document.getElementById('dataAula').valueAsDate = new Date();
    renderizarTabela();

    function gerarRelatorioPDF() {
        const doc = new jsPDF();
        const dataSelecionada = document.getElementById('dataAula').value;
        const [ano, mes, dia] = dataSelecionada.split('-');
        const dataFormatada = `${dia}/${mes}/${ano}`;

        const faltosos = [];
        alunos.forEach((aluno, index) => {
            const status = presencas[index];
            if (status === 'F' || status === 'FS') {
                faltosos.push([aluno, status === 'F' ? 'Falta' : 'FS']);
            }
        });

        doc.setFontSize(18);
        doc.setTextColor(37, 99, 235);
        doc.text("Relatório de Faltas - 2º Ano A", 14, 20);
        
        doc.setFontSize(12);
        doc.setTextColor(30, 41, 59);
        doc.text(`Data: ${dataFormatada}`, 14, 30);

        if (faltosos.length > 0) {
            doc.autoTable({
                startY: 40,
                head: [['Aluno', 'Situação']],
                body: faltosos,
                headStyles: { fillColor: [239, 68, 68] },
                theme: 'grid'
            });
        } else {
            doc.text("Nenhuma ausência registrada. Turma completa!", 14, 45);
        }

        doc.save(`chamada_2A_${dataSelecionada}.pdf`);
    }
</script>

</body>
</html>
